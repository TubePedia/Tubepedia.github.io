<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đồng Hồ Bấm Giây</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }
        .timer {
            font-size: 36px;
            margin-bottom: 20px;
        }
        .button {
            padding: 15px 30px;
            font-size: 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .button:active {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
<p id="last-update"></p>
    <h1>Đồng Hồ Bấm Giây</h1>
    <div class="timer" id="timer">0:00</div>
    <button class="button" id="startButton">Nhấn giữ để chuẩn bị</button>
<a href="https://discord.com/api/oauth2/authorize?client_id=1290259588280750104&redirect_uri=https%3A%2F%2Fvinygamer124.github.io%2Fcallback&response_type=code&scope=identify">
    <button style="background-color: #7289da; color: white; padding: 10px 20px; border: none; cursor: pointer;">
        Đăng nhập bằng Discord
    </button>
</a>
    <script>
// Lấy thời gian cập nhật cuối cùng từ document
const lastUpdated = new Date(document.lastModified);

// Hàm kiểm tra múi giờ người dùng để định dạng giờ 12h hoặc 24h
function is24HourFormat() {
    const userLocale = navigator.language || 'en-US'; // Lấy ngôn ngữ của người dùng
    const region = userLocale.split('-')[1] || 'US'; // Lấy quốc gia
    const regions24Hour = ['VN', 'FR', 'DE', 'RU', 'CN']; // Các quốc gia sử dụng định dạng 24h

    return regions24Hour.includes(region);
}

// Định dạng thời gian theo quốc gia
const options = {
    hour: 'numeric',
    minute: 'numeric',
    hour12: !is24HourFormat(), // Sử dụng 24h hay 12h dựa trên quốc gia
    day: 'numeric',
    month: 'numeric',
    year: 'numeric'
};

// Chuyển đổi thành chuỗi theo định dạng
const formattedDate = lastUpdated.toLocaleString(navigator.language, options);

// Tính thời gian hiện tại trừ thời gian cập nhật cuối
function timeSinceLastUpdate(lastUpdate) {
    const now = new Date();
    const timeDiff = now - lastUpdate;
    const seconds = Math.floor(timeDiff / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const days = Math.floor(hours / 24);

    if (days > 0) {
        return `${days} ngày trước`;
    } else if (hours > 0) {
        return `${hours} giờ trước`;
    } else if (minutes > 0) {
        return `${minutes} phút trước`;
    } else {
        return `vài giây trước`;
    }
}

// Chèn vào phần tử HTML khi trang tải
document.addEventListener("DOMContentLoaded", function() {
    const updateElement = document.getElementById('last-update');
    const timePassedElement = document.getElementById('time-passed');

    // Hiển thị thời gian cập nhật cuối cùng
    updateElement.textContent = 'Last updated by admin: ' + formattedDate;

    // Hiển thị thời gian đã trôi qua từ lần cập nhật cuối
    timePassedElement.textContent = 'Cập nhật cách đây: ' + timeSinceLastUpdate(lastUpdated);
});
    </script>
</body>
</html>